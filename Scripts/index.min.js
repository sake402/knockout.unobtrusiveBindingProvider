var MealReservation=function(){function n(n,t){var i=this;this.name=ko.observable(n).extend({binding:"textInput"});this.price=ko.observable(t);this.formattedPrice=ko.computed(function(){return i.price()?"$"+Number(i.price.peek()).toFixed(2):"None"},null,{deferEvaluation:!0,pure:!0})}return n}(),SeatReservation=function(){function n(n,t,i){this.name=n;this.bindings={meal:"options:$root.availableMeals,optionsText:'name'"};this.meal=ko.observable(t);this.additions=ko.observableArray(i||[]).extend({bindings:"options:$root.additions,attr:{multiple:'multiple'}"})}return n}(),ReservationsViewModel=function(){function n(){var n=this;this.additions=["Baggage","Skis","Wheelchair"];this.availableMeals=[new MealReservation("Standard (sandwich)",0),new MealReservation("Premium (lobster)",34.95),new MealReservation("Ultimate (whole zebra)",290)];this.seats=ko.observableArray([new SeatReservation("Steve",this.availableMeals[0]),new SeatReservation("Bert",this.availableMeals[1],this.additions.filter(function(n,t){return t!==1}))]).extend({bindings:{value:"attr:{title:'seats'}"}});this.count=ko.computed(function(){return n.seats().length});this.totalSurcharge=ko.computed(function(){return n.seats().reduce(function(n,t){return n+Number(t.meal().price())},0).toFixed(2)});this.showSurcharge=ko.computed(function(){return n.totalSurcharge()!=="0.00"}).extend({binding:"visible"});this.addSeat=ko.utils.extend(function(){n.seats.push(new SeatReservation("",n.availableMeals[0]))},{bindings:"enable:seats().length<5"});this.removeSeat=function(t){return n.seats.remove(t)}}return n}(),model=new ReservationsViewModel;ko.bindingProvider.bindings={content:"template: 'reservations'",seats:"visible:count","additions-list":{bindings:"text:additions"},availableMeals:"attr:{title:'available meals'}"};ko.applyBindings(model,document.getElementById("content"));