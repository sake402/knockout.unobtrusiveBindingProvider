var Meal=function(){function n(n,t){var i=this;this.name=ko.observable(n).extend({binding:"textInput"});this.price=ko.observable(t||0);this.formattedPrice=ko.computed(function(){return i.price()?"$"+Number(i.price.peek()).toFixed(2):"None"},null,{deferEvaluation:!0,pure:!0})}return n}(),Seat=function(){function n(n,t,i){var r=this;this.name=n;this.meal=ko.observable(t).extend({bindings:"options:$root.meals,optionsText:'name'"});this.additions=ko.observableArray(i||[]).extend({bindings:"options:$root.additions,attr:{multiple:'multiple'}"});this.selected=ko.utils.extend(function(){return alert("You have selected: "+r.meal.peek().name.peek())},{binding:"change"})}return n}(),Reservations=function(){function n(){var n=this;this.additions=["Baggage","Skis","Wheelchair"];this.meals=ko.utils.extend([new Meal("Standard (sandwich)"),new Meal("Premium (lobster)",34.95),new Meal("Ultimate (whole zebra)",290)],{bindings:"visible:editable"});this.seats=ko.observableArray([new Seat("Fred",this.meals[0]),new Seat("Bert",this.meals[1],this.additions.filter(function(n,t){return t!==1}))]).extend({bindings:"attr:{title:'seats'}"});this.editable=ko.observable(!0);this.count=ko.computed(function(){return n.seats().length});this.totalSurcharge=ko.computed(function(){return n.seats().reduce(function(n,t){return n+Number(t.meal().price())},0).toFixed(2)});this.showSurcharge=ko.computed(function(){return n.totalSurcharge()!=="0.00"});this.addSeat=ko.utils.extend(function(){n.seats.push(new Seat("",n.meals[0]))},{bindings:"enable:seats().length<5"});this.removeSeat=function(t){return n.seats.remove(t)}}return n}(),model=new Reservations;ko.bindings={"list-additions":{bindings:"text:additions"},content:"template:'reservations'","seats-table":"visible:count"};ko.applyBindings(model,document.getElementById("content"));